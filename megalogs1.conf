hostname="megalogs1.tickets.ua"
ifconfig_igb0="inet 94.130.239.109 netmask 0xffffffc0"
defaultrouter="94.130.239.65"
static_routes="mongo"
route_mongo="94.130.239.108 94.130.239.65"

sshd_enable="YES"
ntpd_enable="YES"

powerd_enable="YES"
powerd_flags="-a hiadaptive"

# Set dumpdev to "AUTO" to enable crash dumps, "NO" to disable
dumpdev="NO"

zfs_enable="YES"

pf_enable="YES"
pf_rules="/etc/pf.conf"



#/etc/pf.conf
# macros
ext_if="igb0"

udp_services="{ 161 }"
ssh="{ 222 }"
zabbix="{ 10050 }"
web="{ 80 }"
mongo="{ 27017, 28017, 80 }"
hetzner="{213.133.113.82,213.133.113.83,213.133.113.84,213.133.113.85,213.133.113.86,78.47.119.192/26}"
table <core_servers> persist file "/etc/core_servers"

# options
set limit { states 500000, frags 30000 }
set optimization normal
set block-policy drop
set loginterface $ext_if
set skip on lo

# traffic normalisation
scrub in all fragment reassemble

antispoof quick for { lo }

# filter rules
block quick from any os NMAP
block in log

pass in quick from 94.130.239.108

pass out

# traceroute
pass in quick inet proto icmp from any to any icmp-type { 0 3 8 11 }
pass out quick inet proto icmp from any to any icmp-type { 0 3 8 11 }
pass out on $ext_if inet proto udp from any to any port 33433 >< 33626 keep state

pass in on $ext_if inet proto tcp from {193.84.22.30,193.84.22.48/29,194.44.253.56/29,194.44.160.14,217.20.186.93,217.20.186.221,148.251.40.228,148.251.244.163,213.133.101.38,78.46.83.241,178.210.157.10,138.201.83.162} to ($ext_if) port $ssh
pass in on $ext_if inet proto tcp from {193.84.22.30,193.84.22.48/29,194.44.253.56/29} to ($ext_if) port $web
pass in on $ext_if inet proto tcp from {<core_servers>,<hetzner>,78.46.83.241,78.47.249.210} to ($ext_if) port $mongo

pass in on $ext_if inet proto tcp from {176.9.143.134,88.198.156.174,78.46.83.241} to ($ext_if) port $zabbix

pass in on $ext_if inet proto udp from {193.84.22.30,176.9.143.134,194.44.253.58,193.84.22.48/29} to ($ext_if) port $udp_services




# /etc/core_servers
#ttndev test
#176.9.24.202 
#mongo
94.130.239.109
94.130.239.108
136.243.57.202
#cores
195.201.165.34	
195.201.172.176	
144.76.138.184	
88.99.251.82	
78.46.106.246	
178.63.64.215	
176.9.23.94	
148.251.139.197	
195.201.169.38	
94.130.163.57	
94.130.21.24	
195.201.196.122	
176.9.136.67	
94.130.52.161	
138.201.63.101	
195.201.108.169	
144.76.119.172	
94.130.88.236	
94.130.23.38	
195.201.105.161
95.216.66.48
95.216.66.46
95.216.66.45
95.216.66.43
95.216.41.79 
95.216.32.99
95.216.34.56
95.216.41.101
95.216.34.41
95.216.32.35
95.216.46.166
95.216.34.42
95.216.40.146
95.216.34.38
95.216.34.116
95.216.34.115
95.216.36.207
95.216.36.208
95.216.36.209
95.216.36.210
94.130.67.244 
195.201.11.195
195.201.106.31
94.130.35.106
195.201.10.88
46.4.90.72
176.9.63.222
193.84.22.30
193.84.22.48/29
194.44.253.56/29
217.20.186.221
176.9.101.133
46.4.71.175
176.9.147.226
88.198.57.42
176.9.101.134
46.4.80.108
5.9.5.67
78.47.216.98
176.9.143.134
188.40.110.4
5.9.140.38
144.76.99.116
144.76.237.2
78.46.22.136
148.251.23.111
176.9.53.137
176.9.83.235
148.251.13.146
148.251.235.169
148.251.245.240
176.9.156.18
188.40.134.67
5.9.205.98
148.251.23.227
148.251.23.233
144.76.79.232
78.46.43.82
144.76.236.240
148.251.12.227
148.251.23.118
144.76.224.133
78.46.39.51
78.46.39.21
78.46.43.20
176.9.154.165
5.9.59.86
136.243.13.98
178.63.62.209
136.243.42.205
136.243.42.208
136.243.57.6
136.243.57.7
136.243.57.12
136.243.57.16
136.243.48.29
136.243.48.33
136.243.58.150
138.201.83.162
138.201.83.170
138.201.81.108
138.201.85.12
138.201.85.7
52.58.151.28
148.251.244.163
148.251.189.45
138.201.67.238
138.201.87.101
136.243.42.214
136.243.132.22
136.243.68.197
88.99.95.30
88.99.95.33
88.99.95.34
88.99.95.20
88.99.95.18
136.243.80.37
136.243.75.161
136.243.131.199
148.251.121.38
88.99.147.140
136.243.132.4
88.99.144.227
88.99.149.6
88.99.148.227
136.243.81.147
88.99.149.40
148.251.88.168
88.99.194.168
88.99.151.151
88.99.151.159
88.99.151.152
88.99.192.230
88.99.136.2
88.99.151.156
88.99.193.84
88.99.151.158
88.99.151.157
148.251.75.245
88.99.192.224
88.99.149.136
88.99.149.143
88.99.193.88
88.99.193.87
88.99.192.225
88.99.193.68
88.99.193.86
88.99.151.167
88.99.151.161
88.99.95.205
88.99.192.231
88.99.151.17
88.99.160.226
88.99.149.144
88.99.192.237
148.251.187.30
136.243.81.42
94.130.20.168
176.9.11.242
136.243.146.231
94.130.21.175
94.130.23.29
94.130.21.27
46.4.19.142
136.243.59.31
#Ryzen
94.130.20.168
94.130.20.165
94.130.20.164
94.130.20.162
94.130.20.159
94.130.20.158
94.130.20.157
94.130.20.156
94.130.20.152
94.130.20.148
94.130.32.35
94.130.32.33
94.130.32.25
94.130.23.34
94.130.21.28
94.130.141.18
94.130.141.27
94.130.141.121
94.130.141.52
94.130.141.54
94.130.137.91
88.99.248.137
94.130.162.186
94.130.143.114
88.198.67.251
176.9.17.189
176.9.18.2
95.216.36.139
95.216.36.138
95.216.36.137
95.216.36.136
95.216.40.35
95.216.40.212
95.216.40.38
95.216.40.59
95.216.29.94
95.216.32.94
95.216.40.33
95.216.40.34
95.216.40.52
95.216.40.56
95.216.46.171
95.216.45.112
95.216.46.179
95.216.46.178
95.216.46.167
95.216.46.174
95.216.46.176
95.216.46.175
95.216.46.169
95.216.46.168
95.216.46.164
95.216.34.30
144.76.111.80
195.201.207.245
195.201.168.178
195.201.105.47




# cat /boot/loader.conf 
autoboot_delay="3"
pf_load="YES"

kern.geom.label.disk_ident.enable="0"
kern.geom.label.gptid.enable="0"
vfs.zfs.min_auto_ashift=12
zfs_load="YES"


